# -*- ruby -*-

create_table :pages  do |t|
  t.string   "page_slug", null: false
  t.string   "title",     null: false

  t.datetime "created_at"
  t.datetime "updated_at"

  t.datetime "deleted_at"
end

add_index :pages, [:page_slug, :title], unique: true

create_table :versions  do |t|
  t.integer  "page_id",   null: false
  t.text     "body",      null: false

  t.datetime "created_at"
end

add_index :versions, [:page_id]

execute('CREATE EXTENSION pgroonga')
execute('CREATE INDEX pgroonga_index ON versions USING pgroonga (body);')

# acts_as_taggable
=begin
create_table :tags do |t|
  t.string :name
end

create_table :taggings do |t|
  t.references :tag

  # You should make sure that the column created is
  # long enough to store the required class names.
  t.references :taggable, polymorphic: true
  t.references :tagger, polymorphic: true

  # Limit is created to prevent MySQL error on index
  # length for MyISAM table type: http://bit.ly/vgW2Ql
  t.string :context, limit: 128

  t.datetime :created_at
end

add_index :taggings, :tag_id
add_index :taggings, [:taggable_id, :taggable_type, :context]
=end
